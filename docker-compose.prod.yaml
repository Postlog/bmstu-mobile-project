version: "3"
services:
  service-image-storage:
    container_name: service-image-storage
    build: 
      context: ./service-image-storage
      dockerfile: ./Dockerfile
    environment:
      - SERVER_PORT=8080
      - APP_ENV=local
      - IMAGES_FOLDER_PATH=./images
    volumes:
      - image-storage-volume:/images
    networks:
      - global

  api-composition-postgres:
    container_name: api-composition-postgres
    image: postgres:16
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=""
      - POSTGRES_DB=api-composition
    volumes:
      - api-composition-postgres-volume:/var/lib/postgresql
    networks:
      - service-api-composition

networks:
  global:
  service-api-composition:

volumes:
  image-storage-volume:
  api-composition-postgres-volume: